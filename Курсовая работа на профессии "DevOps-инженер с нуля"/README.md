# –î–∏–ø–ª–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ¬´DevOps-–∏–Ω–∂–µ–Ω–µ—Ä —Å –Ω—É–ª—è¬ª

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Å–∞–π—Ç–∞, –≤–∫–ª—é—á–∞—é—â–µ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Å–±–æ—Ä –ª–æ–≥–æ–≤ –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ Yandex Cloud.

**–ò—Å—Ç–æ—á–Ω–∏–∫ –∑–∞–¥–∞–Ω–∏—è:** [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ Netology](https://github.com/netology-code/fops-sysadm-diplom/blob/main/README.md)

## –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

‚úÖ **–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã** - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç:** [docs/REPORT.md](docs/REPORT.md)

## –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- `terraform/` ‚Äî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∫–æ–¥ –¥–ª—è VPC, –ø–æ–¥—Å–µ—Ç–µ–π, SG, –í–ú –∏ —Å–Ω–∞–ø—à–æ—Ç–æ–≤.
- `ansible/` ‚Äî –ø–ª–µ–π–±—É–∫–∏ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ä–æ–ª–µ–π (web, bastion, Prometheus, Grafana, Elasticsearch, Kibana, beats).
- `inventory/` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–∑ Terraform inventory.
- `docs/`
  - `architecture.md` ‚Äî —Å—Ö–µ–º–∞ —Å–µ—Ç–∏, IP-–ø–ª–∞–Ω, —Ç–∞–±–ª–∏—Ü–∞ —Ä–æ–ª–µ–π –í–ú.
  - `runbook.md` ‚Äî –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ (curl, dashboards, Kibana, —Å–Ω–∞–ø—à–æ—Ç—ã).
  - `screenshots/` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤.
- `README.md` ‚Äî —Ç–µ–∫—É—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: —Ü–µ–ª–∏, –ø–ª–∞–Ω, –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Terraform** >= 1.5.7
- **Yandex Cloud CLI** (`yc`) ‚Äî —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`yc init`)
- **Python 3** —Å –º–æ–¥—É–ª–µ–º `venv`
- **jq** (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON)
- **SSH –∫–ª—é—á** (–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –í–ú)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ YC CLI** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   ```bash
   source scripts/setup-env.sh
   ```
   –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
   ```bash
   export TF_VAR_yc_token=$(yc config get token)
   export TF_VAR_yc_cloud_id=$(yc config get cloud-id)
   export TF_VAR_yc_folder_id=$(yc config get folder-id)
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ terraform.tfvars** (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è setup-env.sh):
   ```bash
   cp terraform/terraform.tfvars.example terraform/terraform.tfvars
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ terraform.tfvars –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ yc_cloud_id, yc_folder_id, ssh_public_key
   ```

3. **–°–æ–∑–¥–∞–Ω–∏–µ ansible/group_vars/all.yml**:
   ```bash
   cp ansible/group_vars/all.yml.example ansible/group_vars/all.yml
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ all.yml –∏ –∑–∞–º–µ–Ω–∏—Ç–µ CHANGE_ME –Ω–∞ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å Grafana
   ```

4. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: `./scripts/bootstrap.sh` (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ)

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞**: `make verify`

5. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**: `make tf-init tf-apply`

6. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è inventory –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**: `make ansible-site`

7. **–ü—Ä–æ–≤–µ—Ä–∫–∏**: –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ `docs/runbook.md` –∏ `docs/verification-checklist.md` (curl ALB, targets Prometheus, Kibana UI, snapshot schedule –∏ —Ç.–¥.).

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 0. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
1. –í—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ö—Ä–∞–Ω–µ–Ω–∏—è Terraform state (–ª–æ–∫–∞–ª—å–Ω–æ/–≤ YC Object Storage), —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏ –∫–ª—é—á.
2. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`terraform.tfvars.example`) —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤, —Å–µ—Ç–µ–π, —Ä–∞–∑–º–µ—Ä–æ–≤ –í–ú.
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, pipeline (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏), —à–∞–±–ª–æ–Ω–Ω—ã–µ Makefile/—Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ Terraform/Ansible.

### –≠—Ç–∞–ø 1. –°–µ—Ç—å –∏ –¥–æ—Å—Ç—É–ø
1. Terraform: —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω VPC —Å –¥–≤—É–º—è –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∏ –¥–≤—É–º—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –ø–æ–¥—Å–µ—Ç—è–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –∑–æ–Ω–∞—Ö.
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ NAT (—á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π NAT instance –∏–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–µ IP —Ç–∞–º, –≥–¥–µ –Ω—É–∂–Ω–æ).
3. –°–æ–∑–¥–∞—Ç—å security groups per-role:
   - `bastion`: –≤—Ö–æ–¥—è—â–∏–π `ssh` –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –∏—Å—Ö–æ–¥—è—â–∏–π –≤–Ω—É—Ç—Ä—å.
   - `web-private`: HTTP –∏–∑ ALB, ssh –∏–∑ bastion.
   - `monitoring-private`: Prometheus/Grafana –ø–æ—Ä—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó.
   - `logging-private`: 5044/9200/5601 –∏ —Ç.–¥.
4. Bastion host: –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—É–±–ª–∏—á–Ω–∞—è –í–ú c –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ SG; –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å user-data/Ansible —Ä–æ–ª—å –¥–ª—è `ssh` jump host.

### –≠—Ç–∞–ø 2. –í–µ–±-—Å–ª–æ–π –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫
1. Terraform: –¥–≤–µ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –≤–µ–±-–í–ú (—Ä–∞–∑–Ω—ã–µ –∑–æ–Ω—ã), –æ–±—â–∏–π –æ–±—Ä–∞–∑ (cloud-init –∏–ª–∏ Ansible).
2. Ansible: —Ä–æ–ª—å `web` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx, –¥–µ–ø–ª–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∞–π—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–æ–≤.
3. Terraform: Target Group + Backend Group + ALB —Å HTTP router –∏ healthcheck `/` –ø–æ—Ä—Ç 80.
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `curl -v http://<alb-ip>/` —á–µ—Ä–µ–∑ bastion –∏ –ª–æ–∫–∞–ª—å–Ω–æ; –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∏ –≤—ã–≤–æ–¥.

### –≠—Ç–∞–ø 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
1. Terraform: –æ—Ç–¥–µ–ª—å–Ω–∞—è –í–ú –ø–æ–¥ Prometheus (–ø—Ä–∏–≤–∞—Ç–Ω–∞—è —Å–µ—Ç—å) –∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –í–ú –ø–æ–¥ Grafana (–ø—É–±–ª–∏—á–Ω–∞—è).
2. Ansible:
   - —Ä–æ–ª—å `node_exporter` –∏ `nginx_log_exporter` ‚Äî —Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –≤–µ–±-–í–ú.
   - —Ä–æ–ª—å `prometheus` ‚Äî –∫–æ–Ω—Ñ–∏–≥ —Å —Ç–∞—Ä–≥–µ—Ç–∞–º–∏ –≤–µ–±-–í–ú –∏ self-monitoring.
   - —Ä–æ–ª—å `grafana` ‚Äî datasource Prometheus, –¥–∞—à–±–æ—Ä–¥—ã US(E) –¥–ª—è CPU/RAM/disk/net + http metrics, —Çresholds.
3. –ü—Ä–æ–≤–µ—Ä–∫–∏: `systemctl status`, `curl http://prom:9090/targets`, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã Grafana.

### –≠—Ç–∞–ø 4. –õ–æ–≥–∏
1. Terraform: –í–ú `elasticsearch` (–ø—Ä–∏–≤–∞—Ç–Ω–∞—è) –∏ `kibana` (–ø—É–±–ª–∏—á–Ω–∞—è).
2. Ansible:
   - —Ä–æ–ª—å `elasticsearch` ‚Äî –æ–¥–Ω–æ–Ω–æ–¥–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä, –ø—Ä–∏–µ–º –ª–æ–≥–æ–≤.
   - —Ä–æ–ª—å `kibana` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∫ Elasticsearch, –±–∞–∑–æ–≤—ã–π index pattern.
   - —Ä–æ–ª—å `filebeat` –Ω–∞ –≤–µ–±-–í–ú –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ `access.log` –∏ `error.log`.
3. –ö–æ–Ω—Ç—Ä–æ–ª—å: `curl http://kibana:5601`, kibana index pattern screenshot, `GET _cat/indices` –∫–æ–º–∞–Ω–¥–æ–π.

### –≠—Ç–∞–ø 5. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
1. Terraform: –ø–æ–ª–∏—Ç–∏–∫–∏ snapshot schedule –Ω–∞ –≤—Å–µ –¥–∏—Å–∫–∏ –í–ú, retention 7 –¥–Ω–µ–π, –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä.
2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ (`yc compute snapshot list`), —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Å–Ω–∞–ø—à–æ—Ç–∞.

### –≠—Ç–∞–ø 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
1. `docs/architecture.md` ‚Äî –¥–∏–∞–≥—Ä–∞–º–º–∞ (draw.io, mermaid) –∏ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥—Å–µ—Ç–µ–π/SG/–ø–æ—Ä—Ç–æ–≤.
2. `docs/runbook.md` ‚Äî –ø–æ—Ä—è–¥–æ–∫ –¥–µ–ø–ª–æ—è (Terraform ‚Üí Ansible), –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ bastion, –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–µ—Ä–≤–∏—Å—ã.
3. `docs/screenshots/` ‚Äî ALB curl, Grafana dashboards, Kibana, Prometheus targets, —Å–ø–∏—Å–æ–∫ —Å–Ω–∞–ø—à–æ—Ç–æ–≤.
4. README —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–π —Å–∞–π—Ç / Kibana / Grafana –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Instance Group —Å –∞–≤—Ç–æ-—Å–∫–µ–π–ª–∏–Ω–≥–æ–º –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–µ–±-–í–ú.
- –î–æ–±–∞–≤–∏—Ç—å HTTPS —á–µ—Ä–µ–∑ Yandex Certificate Manager –∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ ALB –≤ HTTPS‚ÜíHTTP.
- –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: Alertmanager –∏–ª–∏ Grafana Alerts, —Å–±–æ—Ä –ª–æ–≥–æ–≤ —Å–∞–º–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ Filebeat –∏–ª–∏ Logstash.
- –í—ã–Ω–µ—Å—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ Prometheus –≤ Yandex Managed PostgreSQL —á–µ—Ä–µ–∑ CrunchyData adapter.

## –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

- üìä [–ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏](docs/REPORT.md)
- üèóÔ∏è [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](docs/architecture.md)
- üìñ [Runbook (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é)](docs/runbook.md)
- ‚úÖ [–ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–æ–∫](docs/verification-checklist.md)
- üì∏ [–°–∫—Ä–∏–Ω—à–æ—Ç—ã](docs/screenshots/)

## –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | –î–æ—Å—Ç—É–ø | –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
|--------|-----|--------|----------------|
| **–°–∞–π—Ç (ALB)** | http://158.160.199.9 | –ü—É–±–ª–∏—á–Ω—ã–π | - |
| **Grafana** | http://130.193.36.77:3000 | –ü—É–±–ª–∏—á–Ω—ã–π | –°–º. `ansible/group_vars/all.yml` |
| **Kibana** | http://158.160.92.149:5601 | –ü—É–±–ª–∏—á–Ω—ã–π | - |
| **Prometheus** | http://10.70.1.27:9090 | –ß–µ—Ä–µ–∑ bastion | - |
| **Elasticsearch** | http://10.70.2.15:9200 | –ß–µ—Ä–µ–∑ bastion | - |

**Bastion Host:** `ssh ubuntu@62.84.124.19`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

### –†–µ—à–µ–Ω–∏—è

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π VPC —Å–µ—Ç–∏:**
   - –ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ VPC —Å–µ—Ç–µ–π –≤ Yandex Cloud
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–µ—Ç—å `n8n-network` —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–¥—Å–µ—Ç–µ–π

2. **Docker –¥–ª—è Grafana, Elasticsearch, Kibana:**
   - –ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (403 Forbidden)
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤, –∫–∞–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –≤ –∑–∞–¥–∞–Ω–∏–∏

3. **Single-node Elasticsearch:**
   - –ü—Ä–∏—á–∏–Ω–∞: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
   - –†–µ—à–µ–Ω–∏–µ: –û–¥–Ω–æ–Ω–æ–¥–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É–¥—É—â–µ–º

4. **HTTP listener –≤–º–µ—Å—Ç–æ "auto":**
   - –ü—Ä–∏—á–∏–Ω–∞: –í Yandex Cloud ALB API –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∏–ø–∞ "auto"
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP listener —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –≤ –∫–æ–¥–µ

### –ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

1. **–ù–µ—Ç Instance Group:**
   - –ö–æ–º–ø—Ä–æ–º–∏—Å—Å: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ –í–ú –≤–º–µ—Å—Ç–æ Instance Group —Å –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–æ–º
   - –ü—Ä–∏—á–∏–Ω–∞: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç Instance Group

2. **–ù–µ—Ç HTTPS:**
   - –ö–æ–º–ø—Ä–æ–º–∏—Å—Å: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ HTTP
   - –ü—Ä–∏—á–∏–Ω–∞: –ù–µ —É–∫–∞–∑–∞–Ω–æ –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ Yandex Certificate Manager

3. **–ù–µ—Ç Alertmanager:**
   - –ö–æ–º–ø—Ä–æ–º–∏—Å—Å: –û–ø–æ–≤–µ—â–µ–Ω–∏—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
   - –ü—Ä–∏—á–∏–Ω–∞: –ù–µ –≤—Ö–æ–¥–∏—Ç –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã

1. ‚úÖ **–°–µ—Ç—å –∏ –¥–æ—Å—Ç—É–ø** - VPC, –ø–æ–¥—Å–µ—Ç–∏, Security Groups, Bastion Host
2. ‚úÖ **–í–µ–±-—Å–ª–æ–π –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫** - 2 –≤–µ–±-–í–ú, ALB, Target Group
3. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus, Grafana, Node Exporter, USE –¥–∞—à–±–æ—Ä–¥—ã
4. ‚úÖ **–õ–æ–≥–∏** - Elasticsearch, Kibana, Filebeat (30,350+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
5. ‚úÖ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - Snapshot schedule (7 –¥–Ω–µ–π, –µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
6. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í–ú:** 6 (bastion, 2x web, prometheus, grafana, elasticsearch, kibana)
- **–ü–æ–¥—Å–µ—Ç–∏:** 4 (2 –ø—É–±–ª–∏—á–Ω—ã–µ, 2 –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ)
- **Security Groups:** 6
- **–õ–æ–≥–∏ –≤ Elasticsearch:** 30,350+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ú–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus:** 3 targets (2 UP, 1 DOWN)

### üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

–í—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `docs/screenshots/`:
- ‚úÖ ALB curl output
- ‚úÖ Grafana USE dashboards (3 —Å–∫—Ä–∏–Ω—à–æ—Ç–∞)
- ‚úÖ Kibana Discover –∏ Data Views
- ‚úÖ Prometheus targets (JSON)
- ‚úÖ Snapshot schedule

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–¥–∞—á–∏

- [x] –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- [x] –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É, Kibana, Grafana
- [x] –î–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –∫–æ–º–∞–Ω–¥—ã
- [x] –†–∞–±–æ—Ç–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- [x] –ö–æ–¥ —Ä–∞–∑–º–µ—â–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- [x] –†–∞–±–æ—Ç–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–µ—à–µ–Ω–∏–π –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤
- [x] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìä [–ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç](docs/REPORT.md) - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- üèóÔ∏è [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/architecture.md) - —Å—Ö–µ–º–∞ —Å–µ—Ç–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- üìñ [Runbook](docs/runbook.md) - –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
- ‚úÖ [–ß–µ–∫-–ª–∏—Å—Ç](docs/verification-checklist.md) - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- üì∏ [–°–∫—Ä–∏–Ω—à–æ—Ç—ã](docs/screenshots/) - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
